<!-- index.php -->
<?php
session_start();
include 'db.php';

$query = "SELECT * FROM courses";
$stmt = $pdo->prepare($query);
$stmt->execute();
$courses = $stmt->fetchAll(PDO::FETCH_ASSOC);
?>

<?php include 'header.php'; ?>
<div class="container">
    <div class="row mt-4">
       
        <div class="col-md-12">
            
           
            <div class="row" id="courses-list">
                <?php foreach ($courses as $course): ?>
                <div class="col-md-4">
                    <!-- <div class="card">
                        <a class="nav-links text-decoration-none" href="course.php?id=<?= $course['id'] ?>">
                            <img src="<?= $course['image'] ?>" class="card-img-top" alt="<?= $course['title'] ?>">
                        </a>
                        <div class="card-body">
                            <h5 class="card-title"><?= $course['title'] ?></h5>
                            <p class="card-text"><?= $course['instructor'] ?></p>
                            <p class="card-text">
                                <span class="text-danger">Rs<?= $course['price'] ?></span>
                                <?php if ($course['original_price'] > $course['price']): ?>
                                    <span class="course-price">Rs<?= $course['original_price'] ?></span>
                                <?php endif; ?>
                            </p>
                            <p class="card-text">
                                <span class="badge badge-primary"><?= $course['rating'] ?> ⭐</span>
                                <span><?= $course['views'] ?> views</span>
                                </p>
                                <p class="card-text"><?= $course['lessons'] ?> Lessons</p>
                                <p class="card-text"><?= $course['duration'] ?> Hours</p>
                            </div>
                        </div> -->

                        <div class="course-card">
    <div class="card">
        <a class="course-link" href="course.php?id=<?= $course['id'] ?>">
            <img src="<?= $course['image'] ?>" class="card-img-top" alt="<?= $course['title'] ?>">
        </a>
        <div class="card-body">
            <h5 class="card-title"><?= $course['title'] ?></h5>
            <p class="card-text instructor"><?= $course['instructor'] ?></p>
            <div class="price-section">
                <p class="card-text">
                    <span class="text-danger">Rs<?= $course['price'] ?></span>
                    <?php if ($course['original_price'] > $course['price']): ?>
                        <span class="discounted-price">Rs<?= $course['original_price'] ?></span>
                    <?php endif; ?>
                </p>
            </div>
            <div class="rating-section">
                <p class="card-text">
                    <span class="badge badge-primary"><?= $course['rating'] ?> ⭐</span>
                    <span class="views"><?= $course['views'] ?> views</span>
                </p>
            </div>
            <div class="details-section">
                <p class="card-text lessons"><?= $course['lessons'] ?> Lessons</p>
                <p class="card-text duration"><?= $course['duration'] ?> Hours</p>
            </div>
        </div>
    </div>
</div>

                </div>
                <?php endforeach; ?>
            </div>
        </div>
    </div>
</div>
<?php include 'footer.php'; ?>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
